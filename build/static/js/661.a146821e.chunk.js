"use strict";(self.webpackChunkadminpanel=self.webpackChunkadminpanel||[]).push([[661],{7661:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var n=a(1413),i=a(5861),r=a(885),o=a(4687),s=a.n(o),d=a(9891),l=a(8316),c=a(4554),u=a(68),p=a(3400),h=a(890),m=a(1889),v=a(5712),f=a(7391),x=a(6151),Z=a(792),w=a(2739),g=a(627),j=a(2791),_=a(6654),b=a(2881),y=a(9434),C=a(9e3),S=a(7247),P=a(1686),N=a(2419),D=a(3746),I=a(2674),k=a(1428),R=a(5130),M=a(6881),z=a(7477),T=a(184),U={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"15px",width:500,bgcolor:"background.paper",boxShadow:24,p:2};function V(e){var t=e.state,a=e.setState,r=(0,y.I0)();function o(){var e=new Date;return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" @ "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}function d(){return(d=(0,i.Z)(s().mark((function e(a){var n,i,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,console.log(a.target.reply.value),n={message:a.target.reply.value,time:o(),date:new Date},(i=new FormData).append("DID",""),i.append("AID",t.product_id),i.append("type","Review"),i.append("operation","addReply"),i.append("reply",JSON.stringify([n])),i.append("_id",t.ID),e.next=13,(0,_.uN)(i);case 13:200===(d=e.sent).status&&r((0,b.br)({message:d.data.message,variant:"success",open:!0})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0),r((0,b.br)({message:"Something went wrong.",variant:"success",open:!0}));case 21:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}return(0,T.jsx)("div",{children:(0,T.jsx)(Z.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t.open,onClose:function(){return a((function(e){return(0,n.Z)((0,n.Z)({},e),{},{open:!1})}))},closeAfterTransition:!0,BackdropComponent:w.Z,BackdropProps:{timeout:500},children:(0,T.jsx)(g.Z,{in:t.open,children:(0,T.jsxs)(c.Z,{sx:U,children:[(0,T.jsx)(h.Z,{id:"transition-modal-title",variant:"h6",component:"h2",children:"Reply Box"}),(0,T.jsx)(c.Z,{className:"messageContainer",component:"form",onSubmit:function(e){return d.apply(this,arguments)},method:"post",action:"",children:(0,T.jsxs)(m.ZP,{container:!0,className:"innerMessageContainer",children:[(0,T.jsxs)(m.ZP,{xs:12,children:[(0,T.jsx)(h.Z,{variant:"body1",children:"Customer Review"}),(0,T.jsx)(c.Z,{className:"message",children:(0,T.jsx)(h.Z,{variant:"body2",children:t.customer})})]}),t.admin.length>0&&(0,T.jsxs)(m.ZP,{xs:12,children:[(0,T.jsx)(h.Z,{variant:"body1",children:"Author Reply"}),t.admin.map((function(e){return(0,T.jsxs)(c.Z,{className:"message",children:[(0,T.jsx)(h.Z,{variant:"body2",children:e.message}),(0,T.jsx)(h.Z,{variant:"caption",children:e.time})]})}))]}),(0,T.jsx)(m.ZP,{xs:9.5,className:"messageField",children:(0,T.jsx)(f.Z,{fullWidth:!0,size:"small",label:"Reply",type:"text",name:"reply",variant:"outlined"})}),(0,T.jsx)(m.ZP,{xs:2,className:"sendButton",children:(0,T.jsx)(x.Z,{fullWidth:!0,color:"primary",variant:"contained",size:"small",type:"submit",endIcon:(0,T.jsx)(P.Z,{}),children:"Send"})})]})})]})})})})}var L=function(){var e=(0,j.useState)(""),t=(0,r.Z)(e,2),a=t[0],o=(t[1],(0,j.useState)([])),Z=(0,r.Z)(o,2),w=Z[0],g=Z[1],U=(0,j.useState)({P_SKU:[],H_SKU:[]}),L=(0,r.Z)(U,2),K=L[0],H=L[1],A=(0,j.useState)({data:[],isLoading:!1,page:1,limit:10,total:0,product_id:"",total_review:0,active_review:0,hide_review:0}),O=(0,r.Z)(A,2),F=O[0],W=O[1],B=(0,j.useState)({open:!1,customer:[],admin:[],ID:""}),Y=(0,r.Z)(B,2),E=Y[0],J=Y[1],q=(0,I.N)(),G={labels:{confirmable:"Proceed",cancellable:"Cancel"}},Q=(0,y.I0)();function X(){return $.apply(this,arguments)}function $(){return($=(0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,W((function(e){return(0,n.Z)((0,n.Z)({},e),{},{isLoading:!0})})),e.next=4,(0,_.Tn)({page:F.page,limit:F.limit,total:F.total,product_id:F.product_id});case 4:(t=e.sent)&&(g(t.data.data.map((function(e,t){return e.hide}))),W((function(e){return(0,n.Z)((0,n.Z)({},e),{},{data:t.data.data.map((function(e,t){return{id:t+1,CID:e.CID,product_id:e.product_id,rating:e.rating,review:e.review,admin_reply:e.admin_reply,review_title:e.review_title,review_images:e.review_images,review_videos:e.review_videos,yourTube_url:e.yourTube_url,reviewer_name:e.reviewer_name,reviewer_email:e.reviewer_email,hide:e.hide,date:e.date,action:e}})),isLoading:!1,total:t.data.total,filter:!1,total_review:t.data.total,active_review:t.data.active,hide_review:t.data.hide})}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err>>",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}(0,j.useMemo)((function(){X()}),[F.page,F.limit,F.filter]),(0,j.useMemo)((function(){(0,_.IC)().then((function(e){W((function(t){return(0,n.Z)((0,n.Z)({},t),{},{total_review:e.data.total,active_review:e.data.active,hide_review:e.data.hide})}))}))}),[F.data,w]);var ee=[{field:"id",headerName:"ID",width:50},{field:"CID",headerName:"CID",width:100},{field:"hide",headerName:"Status",width:100,renderCell:function(e){return(0,T.jsx)(d.Z,{onChange:te,name:"".concat(e.row.action._id+" "+(e.row.id-1)),checked:w[e.row.id-1]})}},{field:"product_id",headerName:"Product ID",width:100},{field:"reviewer_name",headerName:"Name",width:150},{field:"reviewer_email",headerName:"Email",width:150},{field:"rating",headerName:"Rating",width:150,renderCell:function(e){return(0,T.jsx)(l.Z,{readOnly:!0,value:parseInt(e.formattedValue),precision:.5})}},{field:"review_title",headerName:"Review Title",width:110},{field:"review",headerName:"Review",width:110},{field:"yourTube_url",headerName:"Your Tube",width:110},{field:"date",headerName:"Review At",width:110},{field:"action",headerName:"Actions",width:250,renderCell:function(e){return(0,T.jsxs)(c.Z,{sx:{display:"flex",gap:"5px"},children:[(0,T.jsx)(u.Z,{title:"Update",children:(0,T.jsx)(p.Z,{onClick:function(){Q((0,b.iO)({state:!0,formType:"update_review",payload:e,setRow:W}))},"aria-label":"update",children:(0,T.jsx)(C.Z,{})})}),(0,T.jsx)(u.Z,{title:"Reply",children:(0,T.jsx)(p.Z,{onClick:function(){J((function(t){return(0,n.Z)((0,n.Z)({},t),{},{open:!0,product_id:e.formattedValue.product_id,customer:e.formattedValue.review,admin:e.formattedValue.admin_reply,ID:e.formattedValue._id})}))},"aria-label":"update",children:(0,T.jsx)(P.Z,{})})}),(0,T.jsx)(u.Z,{title:"Delete",children:(0,T.jsx)(p.Z,{onClick:function(t){!function(e,t,a){e.preventDefault(),q({description:"Review will be removed from Database !!!"},G).then((0,i.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:n=e.sent,Q(n?(0,b.br)({open:!0,variant:"success",message:n.data.message}):(0,b.br)({open:!0,variant:"error",message:"Something went wrong !!!"}));case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.log("Operation cancelled because. ",e)}))}(t,_.uN,{DID:"",AID:e.formattedValue._id,type:"Review",operation:"deleteReview",_id:e.formattedValue._id})},children:(0,T.jsx)(S.Z,{})})})]})}}],te=function(e){console.log(e.target.name),console.log(w);var t=e.target.name.split(" "),a=new FormData;a.append("_id",t[0]),a.append("hide",e.target.checked),(0,_.T8)(a).then((function(e){g(w.map((function(e,a){return parseInt(t[1])===a?!e:e}))),Q((0,b.br)({open:!0,variant:"success",message:"Review Status Updated Successfully !!!"}))})).catch((function(e){Q((0,b.br)({open:!0,variant:"error",message:"Something went wrong !!!"}))}))};function ae(){return(0,T.jsx)("div",{style:{marginTop:"2%",height:400,width:"100%"},children:(0,T.jsx)(z._,{rows:F.data,rowCount:F.total,loading:F.isLoading,rowsPerPageOptions:[10,30,50,70,100],filterModel:{items:[{columnField:"product_title",operatorValue:"contains",value:"".concat(F.title)}]},pagination:!0,pageSize:F.limit,page:F.page-1,limit:F.limit,paginationMode:"server",onPageChange:function(e){W((function(t){return(0,n.Z)((0,n.Z)({},t),{},{page:e+1})}))},onPageSizeChange:function(e){return W((function(t){return(0,n.Z)((0,n.Z)({},t),{},{limit:e})}))},columns:ee})})}function ne(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,i.Z)(s().mark((function e(t){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=setTimeout((function(){(0,_.hM)(t.target.value).then((function(e){H((function(t){return(0,n.Z)((0,n.Z)({},t),{},{P_SKU:e.data.P_SKU,H_SKU:e.data.H_SKU})}))})).catch((function(e){H((function(e){return(0,n.Z)((0,n.Z)({},e),{},{P_SKU:[],H_SKU:[]})}))}))}),1e3),e.abrupt("return",(function(){return clearTimeout(a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,T.jsxs)(c.Z,{sx:{pl:4,pr:4},children:[(0,T.jsx)(h.Z,{component:"span",sx:{display:"block"},variant:"h5",children:"Review"}),(0,T.jsxs)(m.ZP,{container:!0,className:"reviewMeta",p:2,children:[(0,T.jsxs)(m.ZP,{className:"reviewMetaItem",sx:{backgroundColor:"#7f5cf7ab"},item:!0,xs:12,md:3.8,children:[(0,T.jsx)(M.Z,{}),(0,T.jsx)(h.Z,{variant:"h4",children:"Total"}),(0,T.jsx)(h.Z,{variant:"h6",children:F.total_review})]}),(0,T.jsxs)(m.ZP,{className:"reviewMetaItem",sx:{backgroundColor:"#0091ff8c"},item:!0,xs:12,md:3.8,children:[(0,T.jsx)(k.Z,{}),(0,T.jsx)(h.Z,{variant:"h4",children:"Active"}),(0,T.jsx)(h.Z,{variant:"h6",children:F.active_review})]}),(0,T.jsxs)(m.ZP,{className:"reviewMetaItem",sx:{backgroundColor:"#f73b3bb5"},item:!0,xs:12,md:3.8,children:[(0,T.jsx)(R.Z,{}),(0,T.jsx)(h.Z,{variant:"h4",children:"Hide"}),(0,T.jsx)(h.Z,{variant:"h6",children:F.hide_review})]})]}),(0,T.jsxs)(m.ZP,{mt:1,container:!0,p:2,sx:{boxShadow:1,borderRadius:2,justifyContent:"space-between",alignItems:"center ",gap:"10px"},children:[(0,T.jsx)(m.ZP,{item:!0,xs:12,md:7.8,children:(0,T.jsx)(v.Z,{freeSolo:!0,size:"small",fullWidth:!0,noOptionsText:"ex : P-01001",autoHighlight:!0,disableClearable:!0,id:"combo-box-demo",options:K.P_SKU.map((function(e){return e.SKU})),renderInput:function(e){return(0,T.jsx)(f.Z,(0,n.Z)((0,n.Z)({onKeyUpCapture:ne,value:a||""},e),{},{label:"Product SKU",onChange:function(e){W((function(t){return(0,n.Z)((0,n.Z)({},t),{},{product_id:e.target.value})}))}}))},onChange:function(e,t){console.log(t),W((function(e){return(0,n.Z)((0,n.Z)({},e),{},{product_id:t})}))}})}),(0,T.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,T.jsx)(x.Z,{fullWidth:!0,variant:"contained",startIcon:(0,T.jsx)(D.Z,{}),onClick:X,children:"Show Reviews"})}),(0,T.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,T.jsx)(x.Z,{fullWidth:!0,variant:"contained",startIcon:(0,T.jsx)(N.Z,{}),onClick:function(){return Q((0,b.iO)({state:!0,formType:"review",setRow:W,row:F,setCheck:g}))},children:"Add Review"})})]}),(0,T.jsx)(m.ZP,{container:!0,mt:2,className:"overviewContainer",children:(0,T.jsxs)(m.ZP,{item:!0,p:2,xs:12,md:12,sx:{boxShadow:2,borderRadius:5},children:[(0,T.jsxs)(h.Z,{component:"span",variant:"h6",children:[" ","Review List"," "]}),(0,T.jsx)(ae,{})]})}),(0,T.jsx)(V,{state:E,setState:J})]})}},2419:function(e,t,a){var n=a(4836);t.Z=void 0;var i=n(a(5649)),r=a(184),o=(0,i.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=o},5130:function(e,t,a){var n=a(4836);t.Z=void 0;var i=n(a(5649)),r=a(184),o=(0,i.default)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=o},9e3:function(e,t,a){var n=a(4836);t.Z=void 0;var i=n(a(5649)),r=a(184),o=(0,i.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Create");t.Z=o},7247:function(e,t,a){var n=a(4836);t.Z=void 0;var i=n(a(5649)),r=a(184),o=(0,i.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=o},1428:function(e,t,a){var n=a(4836);t.Z=void 0;var i=n(a(5649)),r=a(184),o=(0,i.default)((0,r.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");t.Z=o},6881:function(e,t,a){var n=a(4836);t.Z=void 0;var i=n(a(5649)),r=a(184),o=(0,i.default)((0,r.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6.43 9.57L12 15l-1.57-3.43L7 10l3.43-1.57L12 5l1.57 3.43L17 10l-3.43 1.57z"}),"Reviews");t.Z=o},1686:function(e,t,a){var n=a(4836);t.Z=void 0;var i=n(a(5649)),r=a(184),o=(0,i.default)((0,r.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.Z=o},3746:function(e,t,a){var n=a(4836);t.Z=void 0;var i=n(a(5649)),r=a(184),o=(0,i.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.Z=o}}]);
//# sourceMappingURL=661.a146821e.chunk.js.map